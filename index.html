<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>U.S. Housing Affordability Dashboard</title>

  <!-- Mapbox GL JS: renders the interactive map -->
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet" />
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>

  <!-- D3.js: used by C3 and for loading the CSV file -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.16.0/d3.min.js"></script>

  <!-- C3.js: builds the bar and breakdown charts -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.7.20/c3.min.css" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.7.20/c3.min.js"></script>

  <!-- Custom styles -->
  <link href="css/style.css" rel="stylesheet" />

</head>
<body>

  <div id="container">

    <!-- LEFT: Info Panel -->
    <div id="info-panel">

      <!-- Dashboard title and data source subtitle -->
      <h1>U.S. Housing Affordability</h1>
      <p class="subtitle">Median Household Income by State - ACS 2023</p>

      <!-- Dynamic counter: updates as user pans/zooms the map -->
      <div class="stat-block">
        <p class="stat-label">Avg. Median Income (Visible States)</p>
        <div id="income-count">-</div>
      </div>

      <!-- Bar chart: top states by income in current map view -->
      <div class="chart-section">
        <p class="chart-title">Top States by Income</p>
        <div id="bar-chart"></div>
      </div>

      <!-- Age breakdown chart: updates when user clicks a state -->
      <div class="chart-section">
        <p class="chart-title" id="age-title">Click a state to see income by age group</p>
        <div id="age-chart"></div>
      </div>

      <!-- Race breakdown chart: updates when user clicks a state -->
      <div class="chart-section">
        <p class="chart-title" id="race-title">Click a state to see income by race</p>
        <div id="race-chart"></div>
      </div>

      <!-- Description and data source link -->
      <div id="description">
        <p>This dashboard visualizes housing affordability across U.S. states using median household income. Darker teal = lower income, red/orange = higher income. Click any state to see income breakdowns by race and age group.</p>
        <p>Source: <a href="https://data.census.gov/table/ACSST1Y2024.S1903?q=median+household+income+by+state&g=010XX00US$0400000" target="_blank">U.S. Census Bureau, ACS 1-Year Estimates 2023</a></p>
      </div>

    </div>
    <!-- END Info Panel -->

    <!-- RIGHT: Mapbox map renders here -->
    <div id="map"></div>

    <!-- Legend: positioned over the map bottom-right via CSS -->
    <div id="legend">
      <h4>Median Household Income</h4>
      <div class="legend-row"><div class="legend-swatch" style="background:#084c61;"></div> &lt; $65k</div>
      <div class="legend-row"><div class="legend-swatch" style="background:#177e89;"></div> $65k - $75k</div>
      <div class="legend-row"><div class="legend-swatch" style="background:#84bcca;"></div> $75k - $85k</div>
      <div class="legend-row"><div class="legend-swatch" style="background:#ffc857;"></div> $85k - $100k</div>
      <div class="legend-row"><div class="legend-swatch" style="background:#e74c3c;"></div> &gt; $100k</div>
      <p class="legend-source">Source: U.S. Census Bureau, ACS 2023</p>
    </div>

  </div>

  <!-- Main JavaScript file -->
  <script src="js/main.js"></script>

</body>
</html>